<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PEG 2bpp Bitmap Font Viewer</title>
    <style>
        body { font-family: sans-serif; background-color: #2c2c2c; color: #eee; }
        #controls { margin: 10px; padding: 10px; background-color: #444; border-radius: 5px; }
        canvas { background-color: #1a1a1a; border: 1px solid #777; image-rendering: pixelated; }
        .char-grid { display: flex; flex-wrap: wrap; gap: 10px; padding: 10px; }
        .char-container { border: 1px solid #555; padding: 4px; background-color: #383838; }
        .char-info { font-size: 10px; color: #aaa; text-align: center; margin-top: 4px; }
    </style>
</head>
<body>
    <h1>PEG Variable-Width Bitmap Font Viewer</h1>
    <div id="controls">
        <button onclick="drawFont()">Render Font</button>
    </div>
    
    <div class="char-grid" id="charGrid"></div>

    <script>
        // --- FONT DATA DEFINITIONS ---
        const RAW_SYSFONT_OFFSETS_AS_BYTES = [
            0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000,
            0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000,
            0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000,
            0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x00B, 0x016, 0x020,
            0x02B, 0x035, 0x041, 0x04E, 0x054, 0x05F, 0x06A, 0x075, 0x080,
            0x08B, 0x096, 0x0A1, 0x0AC, 0x0B7, 0x0C2, 0x0CD, 0x0D8, 0x0E3,
            0x0EE, 0x0F9, 0x104, 0x10F, 0x11A, 0x120, 0x126, 0x131, 0x13C,
            0x147, 0x152, 0x160, 0x16C, 0x177, 0x182, 0x18E, 0x199, 0x1A3,
            0x1AF, 0x1BB, 0x1C0, 0x1C9, 0x1D6, 0x1E1, 0x1F1, 0x1FD, 0x20A,
            0x215, 0x222, 0x22E, 0x238, 0x243, 0x24F, 0x25B, 0x26B, 0x277,
            0x284, 0x28E, 0x299, 0x2A4, 0x2AF, 0x2BA, 0x2C5, 0x2CA, 0x2D3,
            0x2DD, 0x2E6, 0x2F0, 0x2F9, 0x300, 0x309, 0x313, 0x318, 0x31E,
            0x328, 0x32D, 0x33C, 0x346, 0x34F, 0x359, 0x363, 0x36B, 0x373,
            0x37A, 0x384, 0x38E, 0x39A, 0x3A4, 0x3AE, 0x3B6, 0x3C1, 0x3CC,
            0x3D7, 0x3E2, 0x3E2, 0x000, 0x000, 0x000
        ];
        const RAW_SYSFONT_DATA = [
            0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x81,
            0xDC,0x1B,0x07,0xC3,0x86,0x0F,0x01,0xC0,
            0x30,0x60,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x01,0x81,0xE0,0x18,0x07,0x80,0xF0,
            0x03,0x07,0xF0,0x78,0x3F,0xC1,0xE0,0x3C,
            0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x03,
            0xE0,0x04,0x0F,0xE0,0x3E,0xBF,0xC3,0xFF,
            0x7F,0xC3,0xE9,0xE3,0xDE,0x0F,0x78,0x7B,
            0xC0,0x78,0x0F,0x70,0x70,0xFC,0x3F,0xC0,
            0xFC,0x3F,0xC0,0xFA,0xFF,0xDE,0x1D,0xE1,
            0xDE,0x79,0xDE,0x1D,0xE0,0xEF,0xF8,0x7C,
            0x18,0x03,0xE0,0x18,0x00,0x06,0x00,0x1C,
            0x00,0x00,0x1C,0x00,0x1C,0x00,0x70,0x0C,
            0x1B,0x80,0xE0,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x1C,0x06,0x03,0x80,
            0x00,0x00,0x00,0x01,0x81,0xDC,0x1B,0x0D,
            0x66,0xCC,0x19,0x81,0xC0,0x60,0x30,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x83,
            0x30,0x78,0x0C,0xC1,0x98,0x07,0x07,0xF0,
            0xCC,0x3F,0xC3,0x30,0x66,0x00,0x00,0x0C,
            0x00,0x03,0x00,0x66,0x0E,0x38,0x04,0x06,
            0x30,0x63,0x98,0x61,0x83,0x30,0xC6,0x38,
            0xC1,0x8C,0x06,0x30,0x21,0x80,0x38,0x0E,
            0x38,0x21,0x86,0x18,0x61,0x86,0x18,0x61,
            0x8E,0xCC,0xCC,0x08,0xC0,0x8C,0x30,0x8C,
            0x08,0xC0,0x4C,0x18,0x60,0x18,0x00,0x60,
            0x3C,0x00,0x03,0x00,0x0C,0x00,0x00,0x0C,
            0x00,0x36,0x00,0x30,0x0C,0x19,0x80,0x60,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x30,0x06,0x00,0xC0,0x00,0x00,0x00,
            0x01,0x81,0xDC,0x1B,0x19,0x36,0xCC,0x19,
            0x81,0xC0,0xC0,0x18,0x03,0x00,0x60,0x00,
            0x00,0x00,0x00,0x03,0x06,0x18,0x18,0x18,
            0x63,0x0C,0x0F,0x04,0x01,0x86,0x20,0xC6,
            0x18,0xC3,0x1C,0x70,0x18,0x00,0x01,0x80,
            0xC3,0x18,0x0C,0x0E,0x06,0x18,0xC1,0x98,
            0x31,0x81,0x30,0x4C,0x18,0xC1,0x8C,0x06,
            0x30,0x41,0x80,0x2C,0x16,0x38,0x23,0x03,
            0x18,0x33,0x03,0x18,0x33,0x06,0x8C,0x4C,
            0x08,0xC0,0x8C,0x30,0x86,0x10,0x60,0x88,
            0x30,0x60,0x0C,0x00,0x60,0x66,0x00,0x01,
            0x80,0x0C,0x00,0x00,0x0C,0x00,0x30,0x00,
            0x30,0x00,0x01,0x80,0x60,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x06,
            0x00,0xC0,0x00,0x00,0x00,0x01,0x80,0xCC,
            0x1B,0x19,0x36,0xD8,0x19,0x80,0xC0,0xC0,
            0x18,0x33,0x30,0x60,0x00,0x00,0x00,0x00,
            0x03,0x06,0x18,0x18,0x18,0x63,0x0C,0x0B,
            0x04,0x01,0x86,0x21,0x86,0x18,0xC3,0x1C,
            0x70,0x30,0x00,0x00,0xC0,0xC3,0x11,0xD4,
            0x0E,0x06,0x18,0xC0,0x98,0x31,0x80,0x30,
            0x0C,0x08,0xC1,0x8C,0x06,0x30,0x81,0x80,
            0x2C,0x16,0x2C,0x23,0x03,0x18,0x33,0x03,
            0x18,0x33,0x02,0x0C,0x0C,0x08,0x61,0x0C,
            0x30,0x86,0x10,0x60,0x80,0x30,0x60,0x0C,
            0x00,0x60,0xC3,0x00,0x00,0x00,0x0C,0x00,
            0x00,0x0C,0x00,0x30,0x00,0x30,0x00,0x01,
            0x80,0x60,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x0C,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x30,0x06,0x00,0xC0,0x00,
            0x00,0x00,0x01,0x81,0x98,0x7F,0x9D,0x06,
            0xD8,0x1B,0x01,0x81,0x80,0x0C,0x3B,0x70,
            0x60,0x00,0x00,0x00,0x00,0x03,0x06,0x18,
            0x18,0x00,0x60,0x0C,0x1B,0x07,0xC1,0x80,
            0x01,0x87,0x18,0xC3,0x1C,0x70,0x60,0x7F,
            0xE0,0x60,0x03,0x33,0x36,0x13,0x06,0x19,
            0x80,0x18,0x19,0x88,0x31,0x18,0x00,0xC1,
            0x8C,0x06,0x31,0x01,0x80,0x2C,0x16,0x26,
            0x26,0x01,0x98,0x36,0x01,0x98,0x33,0x80,
            0x0C,0x0C,0x08,0x61,0x06,0x59,0x03,0x20,
            0x31,0x00,0x60,0x60,0x0C,0x00,0x60,0x00,
            0x00,0x00,0x1F,0x0D,0xC1,0xE0,0xEC,0x3C,
            0x7C,0x3D,0x37,0x1C,0x39,0x9E,0x67,0x73,
            0x8E,0xE0,0xF1,0xDC,0x1E,0x9D,0x8F,0x5F,
            0x39,0xCF,0x3B,0xDB,0xBC,0xEF,0x3B,0xF8,
            0x30,0x06,0x00,0xC0,0x00,0x00,0x00,0x01,
            0x80,0x00,0x36,0x0F,0x03,0xB0,0x0E,0x38,
            0x01,0x80,0x0C,0x1F,0xE0,0x60,0x00,0x00,
            0x00,0x00,0x06,0x06,0x18,0x18,0x00,0xC0,
            0x18,0x13,0x0C,0x61,0xB8,0x03,0x03,0xB0,
            0xC3,0x00,0x00,0xC0,0x7F,0xE0,0x30,0x06,
            0x23,0x32,0x13,0x06,0x31,0x80,0x18,0x19,
            0x88,0x31,0x18,0x00,0xC1,0x8C,0x06,0x33,
            0x01,0x80,0x26,0x26,0x26,0x26,0x01,0x98,
            0x36,0x01,0x98,0x61,0xE0,0x0C,0x0C,0x08,
            0x61,0x06,0x59,0x01,0xC0,0x1A,0x00,0xC0,
            0x60,0x06,0x00,0x60,0x00,0x00,0x00,0x31,
            0x8E,0x63,0x31,0x9C,0x66,0x30,0x67,0x39,
            0x8C,0x19,0x88,0x63,0x9C,0xC7,0x31,0x98,
            0xE6,0x33,0x8E,0xD8,0xCC,0x18,0xC6,0x11,
            0x99,0x18,0x46,0x13,0x18,0x60,0x06,0x00,
            0x60,0xF0,0x80,0x00,0x01,0x80,0x00,0x36,
            0x07,0xC0,0x30,0x1E,0x10,0x01,0x80,0x0C,
            0x07,0x87,0xFE,0x00,0x1F,0xF8,0x00,0x06,
            0x06,0x18,0x18,0x00,0xC0,0xF0,0x33,0x08,
            0x31,0xCC,0x03,0x01,0xE0,0x67,0x00,0x01,
            0x80,0x00,0x00,0x18,0x0C,0x26,0x32,0x13,
            0x07,0xF1,0x80,0x18,0x19,0xF8,0x3F,0x18,
            0x00,0xFF,0x8C,0x06,0x35,0x81,0x80,0x26,
            0x26,0x23,0x26,0x01,0x98,0x66,0x01,0x9F,
            0xC0,0xF8,0x0C,0x0C,0x08,0x32,0x06,0x59,
            0x01,0xC0,0x1A,0x00,0xC0,0x60,0x06,0x00,
            0x60,0x00,0x00,0x00,0x01,0x8C,0x36,0x1B,
            0x0C,0xC3,0x30,0x66,0x31,0x8C,0x19,0x90,
            0x63,0x18,0xC6,0x33,0x0C,0xC3,0x61,0x8C,
            0x18,0x4C,0x18,0xC6,0x11,0x99,0x0C,0x86,
            0x12,0x30,0xC0,0x06,0x00,0x31,0x99,0x80,
            0x00,0x01,0x80,0x00,0x36,0x01,0xE0,0x6E,
            0x33,0x30,0x01,0x80,0x0C,0x07,0x87,0xFE,
            0x00,0x1F,0xF8,0x00,0x06,0x06,0x18,0x18,
            0x01,0x80,0x18,0x23,0x00,0x31,0x86,0x03,
            0x03,0x70,0x3B,0x00,0x00,0xC0,0x00,0x00,
            0x30,0x18,0x26,0x66,0x21,0x86,0x19,0x80,
            0x18,0x19,0x88,0x31,0x18,0x3C,0xC1,0x8C,
            0x06,0x38,0xC1,0x80,0x26,0x26,0x23,0x26,
            0x01,0x9F,0xC6,0x01,0x98,0xC0,0x3C,0x0C,
            0x0C,0x08,0x32,0x06,0x59,0x01,0xC0,0x0C,
            0x01,0x80,0x60,0x06,0x00,0x60,0x00,0x00,
            0x00,0x0F,0x8C,0x36,0x03,0x0C,0xC3,0x30,
            0x66,0x31,0x8C,0x19,0xA0,0x63,0x18,0xC6,
            0x33,0x0C,0xC3,0x61,0x8C,0x1E,0x0C,0x18,
            0xC3,0x21,0x99,0x07,0x03,0x20,0x60,0x60,
            0x06,0x00,0x61,0x0F,0x00,0x00,0x01,0x80,
            0x00,0xFF,0x01,0x70,0xDB,0x63,0x20,0x01,
            0x80,0x0C,0x1F,0xE0,0x60,0x00,0x00,0x00,
            0x00,0x0C,0x06,0x18,0x18,0x03,0x00,0x0C,
            0x63,0x00,0x31,0x86,0x06,0x06,0x38,0x03,
            0x00,0x00,0x60,0x7F,0xE0,0x60,0x18,0x36,
            0x6C,0x3F,0x86,0x0D,0x80,0x18,0x19,0x88,
            0x31,0x18,0x18,0xC1,0x8C,0x06,0x30,0xC1,
            0x80,0x23,0x46,0x21,0xA6,0x01,0x98,0x06,
            0x01,0x98,0x60,0x0E,0x0C,0x0C,0x08,0x32,
            0x03,0x8E,0x02,0x60,0x0C,0x03,0x00,0x60,
            0x03,0x00,0x60,0x00,0x00,0x00,0x19,0x8C,
            0x36,0x03,0x0C,0xFF,0x30,0x3C,0x31,0x8C,
            0x19,0xF0,0x63,0x18,0xC6,0x33,0x0C,0xC3,
            0x61,0x8C,0x0F,0x8C,0x18,0xC3,0x20,0xEE,
            0x07,0x03,0x20,0x60,0x30,0x06,0x00,0xC0,
            0x00,0x00,0x00,0x00,0x00,0x00,0x6C,0x19,
            0x30,0xDB,0x61,0xE8,0x01,0x80,0x0C,0x3B,
            0x70,0x60,0x00,0x00,0x00,0x00,0x0C,0x06,
            0x18,0x18,0x06,0x23,0x0C,0x7F,0xCC,0x31,
            0x86,0x06,0x06,0x18,0xC3,0x1C,0x70,0x30,
            0x7F,0xE0,0xC0,0x00,0x13,0xB8,0x21,0x86,
            0x0C,0xC0,0x98,0x31,0x80,0x30,0x0C,0x18,
            0xC1,0x8C,0x06,0x30,0x61,0x80,0x23,0x46,
            0x20,0xE3,0x03,0x18,0x03,0x7B,0x18,0x62,
            0x06,0x0C,0x0C,0x08,0x1C,0x03,0x8E,0x04,
            0x30,0x0C,0x06,0x00,0x60,0x03,0x00,0x60,
            0x00,0x00,0x00,0x31,0x8C,0x36,0x03,0x0C,
            0xC0,0x30,0x60,0x31,0x8C,0x19,0x98,0x63,
            0x18,0xC6,0x33,0x0C,0xC3,0x61,0x8C,0x03,
            0xCC,0x18,0xC1,0xC0,0xEE,0x07,0x01,0xC0,
            0xC0,0x30,0x06,0x00,0xC0,0x00,0x00,0x00,
            0x00,0x00,0x00,0x6C,0x19,0x31,0x9B,0x60,
            0xC8,0x00,0xC0,0x18,0x33,0x30,0x60,0x38,
            0x00,0x00,0xE0,0x0C,0x06,0x18,0x18,0x0C,
            0x23,0x0C,0x03,0x0C,0x31,0x86,0x06,0x06,
            0x18,0xC3,0x1C,0x70,0x18,0x00,0x01,0x80,
            0x00,0x18,0x06,0x40,0xC6,0x0C,0xC0,0x98,
            0x31,0x81,0x30,0x0C,0x18,0xC1,0x8C,0xC6,
            0x30,0x61,0x81,0x23,0x46,0x20,0xE3,0x03,
            0x18,0x03,0x8F,0x18,0x63,0x06,0x0C,0x0C,
            0x08,0x1C,0x03,0x8E,0x04,0x30,0x0C,0x06,
            0x08,0x60,0x03,0x00,0x60,0x00,0x00,0x00,
            0x31,0x8C,0x36,0x0B,0x0C,0xC1,0x30,0x7E,
            0x31,0x8C,0x19,0x98,0x63,0x18,0xC6,0x33,
            0x0C,0xE6,0x33,0x8C,0x10,0xCC,0x98,0xC1,
            0xC0,0xEE,0x09,0x81,0xC1,0x88,0x30,0x06,
            0x00,0xC0,0x00,0x00,0x00,0x01,0x80,0x00,
            0x6C,0x0D,0x61,0x9B,0x31,0xF8,0x00,0xC0,
            0x18,0x03,0x00,0x60,0x38,0x00,0x00,0xE0,
            0x18,0x03,0x30,0x18,0x1F,0xE1,0x98,0x03,
            0x06,0x60,0xCC,0x06,0x03,0x30,0x66,0x1C,
            0x70,0x0C,0x00,0x03,0x00,0x18,0x0E,0x1C,
            0x40,0xC6,0x18,0x61,0x18,0x61,0x83,0x30,
            0x06,0x28,0xC1,0x8C,0xC6,0x30,0x31,0x83,
            0x21,0x86,0x20,0x61,0x86,0x18,0x01,0x86,
            0x18,0x6B,0x8C,0x0C,0x06,0x10,0x08,0x01,
            0x04,0x08,0x18,0x0C,0x0C,0x18,0x60,0x01,
            0x80,0x60,0x00,0x00,0x00,0x33,0x8E,0x63,
            0x11,0x9C,0x62,0x30,0xC3,0x31,0x8C,0x19,
            0x8C,0x63,0x18,0xC6,0x31,0x98,0xDC,0x1D,
            0x8C,0x18,0xCD,0x19,0xC0,0x80,0x44,0x10,
            0xC0,0x83,0x18,0x30,0x06,0x00,0xC0,0x00,
            0x00,0x00,0x01,0x80,0x00,0x6C,0x07,0xC3,
            0x0E,0x1F,0x70,0x00,0x60,0x30,0x00,0x00,
            0x00,0x38,0x00,0x00,0xE0,0x18,0x01,0xE0,
            0x7E,0x1F,0xE0,0xF0,0x07,0x83,0xC0,0x78,
            0x06,0x01,0xE0,0x3C,0x00,0x30,0x00,0x00,
            0x00,0x00,0x18,0x03,0xF0,0xE1,0xEF,0xF0,
            0x3E,0x3F,0xC3,0xFF,0x78,0x03,0xC9,0xE3,
            0xDE,0x7C,0x78,0x7B,0xFF,0x71,0x8F,0x70,
            0x20,0xFC,0x3C,0x00,0xFE,0x3C,0x32,0xF8,
            0x1E,0x03,0xE0,0x08,0x01,0x04,0x1C,0x3C,
            0x1E,0x0F,0xF8,0x60,0x01,0x80,0x60,0x00,
            0x00,0x00,0x1E,0xCB,0xC1,0xE0,0xEE,0x3C,
            0x78,0xC3,0x7B,0xDE,0x1B,0xDE,0xF7,0xBD,
            0xEF,0x78,0xF0,0xC0,0x01,0x9E,0x17,0x86,
            0x0E,0xE0,0x80,0x44,0x39,0xE0,0x83,0xF8,
            0x30,0x06,0x00,0xC0,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,
            0x00,0x30,0x60,0x00,0x00,0x00,0x18,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x60,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x06,0x80,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x7C,0x00,0x03,0xE0,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0xC3,0x00,
            0x00,0xD8,0x00,0x00,0x00,0x00,0x00,0x00,
            0xC0,0x01,0x80,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x0D,0x00,0x00,0x1C,0x06,0x03,
            0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x1F,0xE0,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x7E,0x00,0x00,0x70,0x00,
            0x00,0x00,0x00,0x00,0x01,0xE0,0x03,0xC0,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,
            0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,
        ]

        // // This is where you paste the data from your C++ files.
        // const FONT_DATA = {
        //     latin9: {
        //         uType: 0, uAscent: 7, uDescent: 2, uHeight: 9, wBytesPerLine: 1,
        //         wFirstChar: 32, wLastChar: 126, pOffsets: null,
        //         pData: [ /* Paste Latin_Font_9_Data here */
        //             // Char ' ' (32)
        //             0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        //             // Char '!' (33)
        //             0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x10, 0x00, 0x00,
        //             // Char '"' (34)
        //             0x28, 0x28, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        //             // Char '#' (35)
        //             0x28, 0x28, 0x7C, 0x28, 0x7C, 0x28, 0x28, 0x00, 0x00,
        //             // Char '$' (36)
        //             0x10, 0x3C, 0x50, 0x38, 0x0A, 0x78, 0x10, 0x00, 0x00,
        //             // Char '%' (37)
        //             0x44, 0x48, 0x10, 0x20, 0x40, 0x50, 0x24, 0x00, 0x00,
        //             // Char '&' (38)
        //             0x30, 0x48, 0x48, 0x30, 0x48, 0x48, 0x34, 0x00, 0x00,
        //             // Char ''' (39)
        //             0x10, 0x10, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        //             // Char '(' (40)
        //             0x08, 0x10, 0x20, 0x20, 0x20, 0x10, 0x08, 0x00, 0x00,
        //             // Char ')' (41)
        //             0x20, 0x10, 0x08, 0x08, 0x08, 0x10, 0x20, 0x00, 0x00,
        //             // Char '*' (42)
        //             0x00, 0x54, 0x28, 0x7C, 0x28, 0x54, 0x00, 0x00, 0x00,
        //             // Char '+' (43)
        //             0x00, 0x10, 0x10, 0x7C, 0x10, 0x10, 0x00, 0x00, 0x00,
        //             // Char ',' (44)
        //             0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x10, 0x08, 0x00,
        //             // Char '-' (45)
        //             0x00, 0x00, 0x00, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00,
        //             // Char '.' (46)
        //             0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x10, 0x00, 0x00,
        //             // Char '/' (47)
        //             0x04, 0x08, 0x10, 0x10, 0x20, 0x40, 0x40, 0x00, 0x00,
        //             // Char '0' (48)
        //             0x38, 0x44, 0x4C, 0x54, 0x64, 0x44, 0x38, 0x00, 0x00,
        //             // Char '1' (49)
        //             0x20, 0x60, 0x20, 0x20, 0x20, 0x20, 0x70, 0x00, 0x00,
        //             // Char '2' (50)
        //             0x38, 0x44, 0x04, 0x08, 0x10, 0x20, 0x7C, 0x00, 0x00,
        //             // Char '3' (51)
        //             0x38, 0x44, 0x04, 0x38, 0x04, 0x44, 0x38, 0x00, 0x00,
        //             // Char '4' (52)
        //             0x08, 0x18, 0x28, 0x48, 0x7C, 0x08, 0x08, 0x00, 0x00,
        //             // Char '5' (53)
        //             0x7C, 0x40, 0x40, 0x78, 0x04, 0x44, 0x38, 0x00, 0x00,
        //             // Char '6' (54)
        //             0x38, 0x40, 0x40, 0x78, 0x44, 0x44, 0x38, 0x00, 0x00,
        //             // Char '7' (55)
        //             0x7C, 0x04, 0x08, 0x10, 0x20, 0x20, 0x20, 0x00, 0x00,
        //             // Char '8' (56)
        //             0x38, 0x44, 0x44, 0x38, 0x44, 0x44, 0x38, 0x00, 0x00,
        //             // Char '9' (57)
        //             0x38, 0x44, 0x44, 0x3C, 0x04, 0x04, 0x38, 0x00, 0x00,
        //             // Char ':' (58)
        //             0x00, 0x00, 0x10, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00,
        //             // Char ';' (59)
        //             0x00, 0x00, 0x10, 0x00, 0x10, 0x10, 0x08, 0x00, 0x00,
        //             // Char '<' (60)
        //             0x08, 0x10, 0x20, 0x40, 0x20, 0x10, 0x08, 0x00, 0x00,
        //             // Char '=' (61)
        //             0x00, 0x00, 0x7C, 0x00, 0x7C, 0x00, 0x00, 0x00, 0x00,
        //             // Char '>' (62)
        //             0x40, 0x20, 0x10, 0x08, 0x10, 0x20, 0x40, 0x00, 0x00,
        //             // Char '?' (63)
        //             0x38, 0x44, 0x04, 0x08, 0x10, 0x00, 0x10, 0x00, 0x00,
        //             // Char '@' (64)
        //             0x38, 0x44, 0x5C, 0x54, 0x54, 0x40, 0x38, 0x00, 0x00,
        //             // Char 'A' (65)
        //             0x10, 0x28, 0x44, 0x44, 0x7C, 0x44, 0x44, 0x00, 0x00,
        //             // Char 'B' (66)
        //             0x78, 0x44, 0x44, 0x78, 0x44, 0x44, 0x78, 0x00, 0x00,
        //             // Char 'C' (67)
        //             0x38, 0x44, 0x40, 0x40, 0x40, 0x44, 0x38, 0x00, 0x00,
        //             // Char 'D' (68)
        //             0x70, 0x48, 0x44, 0x44, 0x44, 0x48, 0x70, 0x00, 0x00,
        //             // Char 'E' (69)
        //             0x7C, 0x40, 0x40, 0x78, 0x40, 0x40, 0x7C, 0x00, 0x00,
        //             // Char 'F' (70)
        //             0x7C, 0x40, 0x40, 0x78, 0x40, 0x40, 0x40, 0x00, 0x00,
        //             // Char 'G' (71)
        //             0x38, 0x44, 0x40, 0x4C, 0x44, 0x44, 0x38, 0x00, 0x00,
        //             // Char 'H' (72)
        //             0x44, 0x44, 0x44, 0x7C, 0x44, 0x44, 0x44, 0x00, 0x00,
        //             // Char 'I' (73)
        //             0x7C, 0x10, 0x10, 0x10, 0x10, 0x10, 0x7C, 0x00, 0x00,
        //             // Char 'J' (74)
        //             0x0C, 0x04, 0x04, 0x04, 0x04, 0x44, 0x38, 0x00, 0x00,
        //             // Char 'K' (75)
        //             0x44, 0x48, 0x50, 0x60, 0x50, 0x48, 0x44, 0x00, 0x00,
        //             // Char 'L' (76)
        //             0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x7C, 0x00, 0x00,
        //             // Char 'M' (77)
        //             0x82, 0xC6, 0xAA, 0x92, 0x82, 0x82, 0x82, 0x00, 0x00,
        //             // Char 'N' (78)
        //             0x44, 0x64, 0x54, 0x4C, 0x44, 0x44, 0x44, 0x00, 0x00,
        //             // Char 'O' (79)
        //             0x38, 0x44, 0x44, 0x44, 0x44, 0x44, 0x38, 0x00, 0x00,
        //             // Char 'P' (80)
        //             0x78, 0x44, 0x44, 0x78, 0x40, 0x40, 0x40, 0x00, 0x00,
        //             // Char 'Q' (81)
        //             0x38, 0x44, 0x44, 0x44, 0x54, 0x48, 0x34, 0x00, 0x00,
        //             // Char 'R' (82)
        //             0x78, 0x44, 0x44, 0x78, 0x50, 0x48, 0x44, 0x00, 0x00,
        //             // Char 'S' (83)
        //             0x3C, 0x40, 0x40, 0x38, 0x04, 0x04, 0x78, 0x00, 0x00,
        //             // Char 'T' (84)
        //             0x7C, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00,
        //             // Char 'U' (85)
        //             0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x38, 0x00, 0x00,
        //             // Char 'V' (86)
        //             0x44, 0x44, 0x44, 0x44, 0x44, 0x28, 0x10, 0x00, 0x00,
        //             // Char 'W' (87)
        //             0x82, 0x82, 0x82, 0x92, 0x92, 0xAA, 0x44, 0x00, 0x00,
        //             // Char 'X' (88)
        //             0x44, 0x44, 0x28, 0x10, 0x28, 0x44, 0x44, 0x00, 0x00,
        //             // Char 'Y' (89)
        //             0x44, 0x44, 0x28, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00,
        //             // Char 'Z' (90)
        //             0x7C, 0x04, 0x08, 0x10, 0x20, 0x40, 0x7C, 0x00, 0x00,
        //             // Char '[' (91)
        //             0x38, 0x20, 0x20, 0x20, 0x20, 0x20, 0x38, 0x00, 0x00,
        //             // Char '\' (92)
        //             0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x00, 0x00,
        //             // Char ']' (93)
        //             0x38, 0x08, 0x08, 0x08, 0x08, 0x08, 0x38, 0x00, 0x00,
        //             // Char '^' (94)
        //             0x10, 0x28, 0x44, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        //             // Char '_' (95)
        //             0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00,
        //             // Char '`' (96)
        //             0x10, 0x08, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        //             // Char 'a' (97)
        //             0x00, 0x00, 0x38, 0x04, 0x3C, 0x44, 0x3C, 0x00, 0x00,
        //             // Char 'b' (98)
        //             0x40, 0x40, 0x78, 0x44, 0x44, 0x44, 0x78, 0x00, 0x00,
        //             // Char 'c' (99)
        //             0x00, 0x00, 0x38, 0x40, 0x40, 0x40, 0x38, 0x00, 0x00,
        //             // Char 'd' (100)
        //             0x04, 0x04, 0x3C, 0x44, 0x44, 0x44, 0x3C, 0x00, 0x00,
        //             // Char 'e' (101)
        //             0x00, 0x00, 0x38, 0x44, 0x7C, 0x40, 0x38, 0x00, 0x00,
        //             // Char 'f' (102)
        //             0x18, 0x20, 0x20, 0x78, 0x20, 0x20, 0x20, 0x00, 0x00,
        //             // Char 'g' (103)
        //             0x00, 0x00, 0x3C, 0x44, 0x44, 0x3C, 0x04, 0x44, 0x38,
        //             // Char 'h' (104)
        //             0x40, 0x40, 0x78, 0x44, 0x44, 0x44, 0x44, 0x00, 0x00,
        //             // Char 'i' (105)
        //             0x10, 0x00, 0x30, 0x10, 0x10, 0x10, 0x38, 0x00, 0x00,
        //             // Char 'j' (106)
        //             0x08, 0x00, 0x18, 0x08, 0x08, 0x08, 0x48, 0x30, 0x00,
        //             // Char 'k' (107)
        //             0x40, 0x40, 0x48, 0x50, 0x60, 0x50, 0x48, 0x00, 0x00,
        //             // Char 'l' (108)
        //             0x30, 0x10, 0x10, 0x10, 0x10, 0x10, 0x38, 0x00, 0x00,
        //             // Char 'm' (109)
        //             0x00, 0x00, 0x68, 0x94, 0x94, 0x94, 0x94, 0x00, 0x00,
        //             // Char 'n' (110)
        //             0x00, 0x00, 0x78, 0x44, 0x44, 0x44, 0x44, 0x00, 0x00,
        //             // Char 'o' (111)
        //             0x00, 0x00, 0x38, 0x44, 0x44, 0x44, 0x38, 0x00, 0x00,
        //             // Char 'p' (112)
        //             0x00, 0x00, 0x78, 0x44, 0x44, 0x78, 0x40, 0x40, 0x40,
        //             // Char 'q' (113)
        //             0x00, 0x00, 0x3C, 0x44, 0x44, 0x3C, 0x04, 0x04, 0x04,
        //             // Char 'r' (114)
        //             0x00, 0x00, 0x58, 0x60, 0x40, 0x40, 0x40, 0x00, 0x00,
        //             // Char 's' (115)
        //             0x00, 0x00, 0x3C, 0x40, 0x38, 0x04, 0x78, 0x00, 0x00,
        //             // Char 't' (116)
        //             0x20, 0x20, 0x78, 0x20, 0x20, 0x24, 0x18, 0x00, 0x00,
        //             // Char 'u' (117)
        //             0x00, 0x00, 0x44, 0x44, 0x44, 0x44, 0x3C, 0x00, 0x00,
        //             // Char 'v' (118)
        //             0x00, 0x00, 0x44, 0x44, 0x44, 0x28, 0x10, 0x00, 0x00,
        //             // Char 'w' (119)
        //             0x00, 0x00, 0x82, 0x82, 0x92, 0x92, 0x54, 0x00, 0x00,
        //             // Char 'x' (120)
        //             0x00, 0x00, 0x44, 0x28, 0x10, 0x28, 0x44, 0x00, 0x00,
        //             // Char 'y' (121)
        //             0x00, 0x00, 0x44, 0x44, 0x44, 0x3C, 0x04, 0x44, 0x38,
        //             // Char 'z' (122)
        //             0x00, 0x00, 0x7C, 0x08, 0x10, 0x20, 0x7C, 0x00, 0x00,
        //             // Char '{' (123)
        //             0x18, 0x20, 0x20, 0x40, 0x20, 0x20, 0x18, 0x00, 0x00,
        //             // Char '|' (124)
        //             0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00,
        //             // Char '}' (125)
        //             0x30, 0x08, 0x08, 0x02, 0x08, 0x08, 0x30, 0x00, 0x00,
        //             // Char '~' (126)
        //             0x00, 0x48, 0x90, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        //         ]
        //     },
        //     sysfont: {
        //         uType: 1, uHeight: 16, wFirstChar: 16, wLastChar: 213,
        //         pOffsets: bytesToWords(RAW_SYSFONT_OFFSETS_AS_BYTES),
        //         pData: RAW_SYSFONT_DATA
        //     }
        // };
        const Font = {
            uType: 1,
            uAscent: 0x10,
            uDescent: 0,
            uHeight: 0x10,
            wBytesPerLine: 0x7D,
            wFirstChar: 0, wLastChar: 0x7F,
            pOffsets: RAW_SYSFONT_OFFSETS_AS_BYTES,
            pData: RAW_SYSFONT_DATA
        };

        // This value is critical. It's the total width in bytes of one scanline
        // for the *entire* font data blob, not one character.
        // It's calculated from the largest bit offset.
        // SysFont.wBytesPerLine = Math.ceil(SysFont.pOffsets[SysFont.pOffsets.length - 1] / 8 / SysFont.uHeight);
        Font.atlasWidth = Font.pOffsets[Font.pOffsets.length - 4];

        const charGrid = document.getElementById('charGrid');

        function drawFont() {
            charGrid.innerHTML = '';
            for (let charCode = Font.wFirstChar; charCode <= Font.wLastChar; charCode++) {
                const container = document.createElement('div');
                container.className = 'char-container';
                const canvas = document.createElement('canvas');
                
                const charWidth = getCharPixelWidth(charCode, Font);
                canvas.width = charWidth > 0 ? charWidth : 8;
                canvas.height = Font.uHeight;
                
                renderBitmapChar(canvas.getContext('2d'), Font, charWidth, charCode);

                const info = document.createElement('div');
                info.className = 'char-info';
                const charDisplay = charCode >= 32 && charCode <= 126 ? String.fromCharCode(charCode).replace(' ', 'sp') : '.';
                info.textContent = `${charCode} ('${charDisplay}') w:${charWidth}`;
                
                container.appendChild(canvas);
                container.appendChild(info);
                charGrid.appendChild(container);
            }
        }
        
        // This logic directly mirrors the C++ code.
        function getCharPixelWidth(charCode, font) {
            const charIndex = charCode - font.wFirstChar;
            if (charIndex < 0 || charIndex + 1 >= font.pOffsets.length) return 0;
            
            const startBitOffset = font.pOffsets[charIndex];
            const endBitOffset = font.pOffsets[charIndex + 1];
            
            // The width is simply the difference in bit offsets.
            return endBitOffset - startBitOffset;
        }

        // Corrected 1bpp renderer using pitched memory logic.
        function renderBitmapChar(ctx, font, width, charCode) {
            if (width === 0) return;
            ctx.fillStyle = '#00F000'; // Solid black pixels

            const charIndex = charCode - font.wFirstChar;
            const startBitOffsetOfChar = font.pOffsets[charIndex];

            for (let y = 0; y < font.uHeight; y++) {
                // Calculate the start of the current scanline for this character
                const startBitOfScanline = startBitOffsetOfChar + (y * font.wBytesPerLine * 8);

                for (let x = 0; x < width; x++) {
                    // Get the specific bit for this pixel
                    const currentBit = startBitOfScanline + x;
                    const byteIndex = Math.floor(currentBit / 8);
                    const bitInByte = 7 - (currentBit % 8);

                    // Check if the bit is set and draw the pixel
                    if ((font.pData[byteIndex] >> bitInByte) & 1) {
                        ctx.fillRect(x, y, 1, 1);
                    }
                }
            }
        }
        
        window.onload = drawFont;
    </script>
</body>
</html>